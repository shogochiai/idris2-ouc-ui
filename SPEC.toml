# OucDashboard SPEC.toml
# OUC Dashboard UI - idris2-dom-mvc

[meta]
version = "0.1.0"
description = "Dashboard UI for OUC (Observable Unit Canister) monitoring"

# =============================================================================
# Model Requirements - Data Types
# =============================================================================

[[spec]]
id = "REQ_MODEL_INIT"
description = "Initial model has empty lists and Idle state"
priority = "must"
tags = ["model", "init"]

[[spec]]
id = "REQ_MODEL_AUDITOR"
description = "Auditor type has id, name, and assigned OU list"
priority = "must"
tags = ["model", "types"]

[[spec]]
id = "REQ_MODEL_OU"
description = "OU type has address, chain, status, and last sync time"
priority = "must"
tags = ["model", "types"]

[[spec]]
id = "REQ_MODEL_PROPOSAL"
description = "Proposal type has id, description, votes for/against, and status"
priority = "must"
tags = ["model", "types"]

[[spec]]
id = "REQ_MODEL_EVENT"
description = "Event type has timestamp, event type, chain, and details"
priority = "must"
tags = ["model", "types"]

# =============================================================================
# View Requirements - Display
# =============================================================================

[[spec]]
id = "REQ_VIEW_AUDITOR_LIST"
description = "Display auditor list with names and assigned OUs"
priority = "must"
tags = ["view", "display"]

[[spec]]
id = "REQ_VIEW_OU_STATUS"
description = "Display OU status cards showing chain, address, and sync status"
priority = "must"
tags = ["view", "display"]

[[spec]]
id = "REQ_VIEW_PROPOSAL_LIST"
description = "Display proposal list with vote counts and status badges"
priority = "must"
tags = ["view", "display"]

[[spec]]
id = "REQ_VIEW_EVENT_LOG"
description = "Display event log with timestamps and event details"
priority = "must"
tags = ["view", "display"]

[[spec]]
id = "REQ_VIEW_LOADING"
description = "Display loading indicator while fetching data"
priority = "must"
tags = ["view", "state"]

[[spec]]
id = "REQ_VIEW_ERROR"
description = "Display error message when API call fails"
priority = "must"
tags = ["view", "state"]

# =============================================================================
# Update Requirements - State Transitions
# =============================================================================

[[spec]]
id = "REQ_UPDATE_INIT"
description = "Init message sets Loading state"
priority = "must"
tags = ["update", "lifecycle"]

[[spec]]
id = "REQ_UPDATE_REFRESH"
description = "Refresh message re-fetches all data from API"
priority = "should"
tags = ["update", "lifecycle"]

[[spec]]
id = "REQ_UPDATE_TAB_SWITCH"
description = "Tab switch changes active view (Auditors/OUs/Proposals/Events)"
priority = "should"
tags = ["update", "navigation"]

[[spec]]
id = "REQ_UPDATE_GOT_AUDITORS"
description = "GotAuditors updates model with fetched auditor list"
priority = "must"
tags = ["update", "api"]

[[spec]]
id = "REQ_UPDATE_GOT_OUS"
description = "GotOUs updates model with fetched OU list"
priority = "must"
tags = ["update", "api"]

[[spec]]
id = "REQ_UPDATE_GOT_PROPOSALS"
description = "GotProposals updates model with fetched proposal list"
priority = "must"
tags = ["update", "api"]

[[spec]]
id = "REQ_UPDATE_GOT_EVENTS"
description = "GotEvents updates model with fetched event list"
priority = "must"
tags = ["update", "api"]

[[spec]]
id = "REQ_UPDATE_API_ERROR"
description = "ApiError sets error state with message"
priority = "must"
tags = ["update", "error"]

# =============================================================================
# Economics Integration - Tier & Subscription (from ecosystem.md)
# =============================================================================

[[spec]]
id = "REQ_MODEL_TIER"
description = "Tier type has Archive/Economy/Standard/Real-time with sync frequency and monthly cost"
priority = "should"
tags = ["model", "economics"]

[[spec]]
id = "REQ_MODEL_SUBSCRIPTION"
description = "Subscription type has current tier, expiry date, and auto-renew flag"
priority = "should"
tags = ["model", "economics"]

[[spec]]
id = "REQ_VIEW_TIER_STATUS"
description = "Display current tier badge with sync frequency (1/day, 1/hour, 1/15min, 1/min)"
priority = "should"
tags = ["view", "economics"]

[[spec]]
id = "REQ_UPDATE_GOT_SUBSCRIPTION"
description = "GotSubscription updates model with tier and subscription status"
priority = "should"
tags = ["update", "economics"]

# =============================================================================
# Treasury Integration - Balance Display (from ecosystem.md)
# =============================================================================

[[spec]]
id = "REQ_MODEL_TREASURY"
description = "Treasury type has ckETH balance, ICP balance, and cycles remaining"
priority = "should"
tags = ["model", "treasury"]

[[spec]]
id = "REQ_VIEW_TREASURY_BALANCE"
description = "Display treasury balances (ckETH, ICP, Cycles) with 70/30 distribution indicator"
priority = "should"
tags = ["view", "treasury"]

[[spec]]
id = "REQ_UPDATE_GOT_TREASURY"
description = "GotTreasury updates model with current balances"
priority = "should"
tags = ["update", "treasury"]

# =============================================================================
# OU Event Integration - Upgrade Monitoring (from ecosystem.md)
# =============================================================================

[[spec]]
id = "REQ_MODEL_UPGRADE_EVENT"
description = "UpgradeEvent type has UpgradeProposed/Approved/Rejected/Executed status"
priority = "could"
tags = ["model", "upgrade"]

[[spec]]
id = "REQ_VIEW_UPGRADE_TIMELINE"
description = "Display upgrade proposal timeline with voting progress"
priority = "could"
tags = ["view", "upgrade"]

[[spec]]
id = "REQ_UPDATE_GOT_UPGRADE_EVENTS"
description = "GotUpgradeEvents updates model with OU upgrade event history"
priority = "could"
tags = ["update", "upgrade"]

# =============================================================================
# Internet Identity Authentication (REQ_*_AUTH_*)
# =============================================================================

[[spec]]
id = "REQ_MODEL_AUTH"
description = "AuthState type has NotAuthenticated/Authenticating/Authenticated(principal)"
priority = "should"
tags = ["model", "auth"]

[[spec]]
id = "REQ_VIEW_AUTH_STATUS"
description = "Display auth status with login/logout button and principal badge"
priority = "should"
tags = ["view", "auth"]

[[spec]]
id = "REQ_UPDATE_AUTH_LOGIN_REQUEST"
description = "LoginRequest sets Authenticating state"
priority = "should"
tags = ["update", "auth"]

[[spec]]
id = "REQ_UPDATE_AUTH_LOGIN_SUCCESS"
description = "LoginSuccess sets Authenticated state with principal"
priority = "should"
tags = ["update", "auth"]

[[spec]]
id = "REQ_UPDATE_AUTH_LOGIN_FAILURE"
description = "LoginFailure resets to NotAuthenticated state"
priority = "should"
tags = ["update", "auth"]

[[spec]]
id = "REQ_UPDATE_AUTH_LOGOUT_REQUEST"
description = "LogoutRequest triggers logout flow"
priority = "should"
tags = ["update", "auth"]

[[spec]]
id = "REQ_UPDATE_AUTH_LOGOUT_COMPLETE"
description = "LogoutComplete resets to NotAuthenticated state"
priority = "should"
tags = ["update", "auth"]
